name: "Find New Symbols"

on:
  workflow_dispatch:
  schedule:
    # run once a week
    - cron: "0 1 * * 3"

jobs:
  hello_world_job:
    runs-on: ubuntu-latest
    name: A job to look for new symbols
    steps:
      - name: lookup new symbols
        uses: adagrad/findb_dolthub@v1
        env:
          REPO: adagrad
          DATABASE: findb
          DOLTHUB_SECRET_JWT: ${{ secrets.DOLTHUB_SECRET_JWT }}
          DOLTHUB_SECRET: ${{ secrets.DOLTHUB_SECRET }}
        with:
          command1: yfinance
          command2: symbol
          command_args: "--time 300 --dolt-load"
